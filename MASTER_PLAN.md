# AI-Corp Genesis: 自律分散型AI組織構築計画

## 1. プロジェクト概要
本プロジェクトの目的は、単一のVPS上で動作する「完全な機能を持つAI企業組織」を構築することである。
開発だけでなく、インフラ管理、セキュリティ、法務、営業、経営判断の各機能を自律的なAIエージェント（Claude Code + tmux）として実装し、それらが相互に連携して価値を創出するエコシステムを目指す。

## 2. アーキテクチャとデータ管理方針

### 2.1. データ整合性と通信の解決策（脱・単一MDファイル）
単一ファイルの競合と肥大化を防ぐため、**「ディレクトリベースのメッセージキュー」**と**「構造化データ」**を採用する。

* **通信プロトコル:**
    * `communication/{from_dept}/{to_dept}/` ディレクトリに、タイムスタンプ付きのJSONまたはMDファイル（例: `YYYYMMDD_HHMM_ReqID.json`）を配置することで指示を送る。
    * 各エージェントは自分の「受信箱」を監視し、処理が終わればファイルを `archive/` へ移動する。これによりファイルの競合を防ぐ。
* **データベース:**
    * 顧客情報や会計情報は、単一テキストではなく **SQLite** (MCP経由) または **分割されたJSONファイル群**（`data/crm/cust_001.json` 等）として管理する。
* **ステート管理:**
    * 各部署は `status.md` を持ち、現在の自身のステータス（Busy/Idle）と進行中のタスクのみを記載する。

### 2.2. システム構成（tmuxウィンドウ構成案）

| Window ID | 部署名 | 役割 (Role) | 担当エージェント数 |
| :--- | :--- | :--- | :--- |
| **0: HQ** | 経営戦略 | **CEO**: 全体指揮 / **COO**: 整合性チェック・進捗管理 | 2 |
| **1: Biz** | 営業・Mkt | **Sales**: 案件獲得・顧客対応 / **Marketing**: 市場調査 | 2 |
| **2: Dev** | 開発部 | **PM**: 設計 / **Devs**: 実装 (FE/BE) | 2~3 |
| **3: Gov** | ガバナンス | **Legal**: 法務・国際規制チェック / **Accounting**: 予実管理 | 2 |
| **4: Infra** | インフラ・Sec | **SysAdmin**: VPS環境維持 / **SecOps**: 脆弱性診断 | 2 |

---

## 3. 実装ロードマップ

リスクを最小化するため、以下のフェーズに分けて実装を行う。

### Phase 1: コアシステムと通信基盤の確立 (Foundation)
**目標:** ファイル競合を起こさずに複数のAIが連携できる仕組みを作る。
* [ ] **ファイルシステム設計:** `communication/`, `data/`, `logs/` のディレクトリ構造を確定。
* [ ] **通信ルールの実装:** CEOが指示を出し、Devが受け取り、完了報告を返すフローを「ファイル分割方式」で成功させる。
* [ ] **COO（整合性担当）の設置:** 各エージェントの動きに矛盾がないか、ログを監視する専門ロールをテスト導入。

### Phase 2: インフラとセキュリティの防衛線 (Defense)
**目標:** 開発を行う環境自体をセキュアに保ち、外部攻撃や内部崩壊を防ぐ。
* [ ] **SysAdminの実装:** VPSのOSアップデート、リソース監視（CPU/Memory）、ログローテーションの自動化。
* [ ] **SecOpsの実装:** 最新のCVE情報（脆弱性情報）をWebから取得し、使用ライブラリやOSに警告を出す仕組み。
* [ ] **インフラ権限の分離:** 開発AIがOSの重要設定を破壊できないよう、実行ユーザーや権限のルール策定。

### Phase 3: ビジネスロジックと外部連携 (Business)
**目標:** 案件を獲得し、実行可否を判断する「商流」を作る。
* [ ] **Salesエージェント:** 仮想的な案件メールやSNSトレンドから「見込み案件」を作成。
* [ ] **受注判定フロー:** Salesが出した案件に対し、**CEO(予算) + PM(技術) + Legal(法務)** が合議を行い「Go/No-Go」を判定するプロセスの実装。
* [ ] **CRM構築:** 顧客データと案件ステータスを管理する軽量DBの構築。

### Phase 4: グローバル・コンプライアンス (Expansion)
**目標:** 国際的な法規制に対応し、品質を保証する。
* [ ] **Legalエージェント:** GDPR（欧州）、CCPA（米国）、個人情報保護法（日本）、サイバーセキュリティ法（中国/ロシア等）の基本ルールセットを知識ベース(RAG)として持たせる。
* [ ] **出荷前審査:** 成果物に対し、LegalとSecOpsが最終承認（署名）しないとリリースできないフローの確立。

---

## 4. 懸念事項と対策 (Risk Management)

| 懸念領域 | 具体的なリスク | 対策方針 |
| :--- | :--- | :--- |
| **整合性** | 部署間で矛盾するルールが発生する | **COOエージェント**を「ルールキーパー」として配置。定期的に全エージェントのsystem promptと行動ログを照合する。 |
| **データ** | MDファイルの肥大化・破損 | **ファイル分割管理**と**SQLite**の導入。会話履歴は要約してアーカイブ(`logs/archive/`)へ移動し、アクティブなメモリを軽量化する。 |
| **セキュリティ** | 外部からの攻撃・情報漏洩 | **SecOps**が独立して動作。外部通信のホワイトリスト管理。VPS自体のFW設定を定期監査。 |
| **判断精度** | 技術的に不可能な案件を受注してしまう | **「フィジビリティスタディ（実現可能性調査）」**をフローに組み込む。PMが技術検証を行い、OKを出さないと受注ステータスに進めない。 |

---

## 5. 次のアクション (Next Steps)
1.  この `MASTER_PLAN.md` をプロジェクトルートに保存。
2.  `mkdir -p communication data/db logs/archive` コマンドで基本ディレクトリを作成。
3.  Phase 1の「通信ルール」を定義したシステムプロンプトを作成し、CEOとPMだけでテスト稼働を開始する。
